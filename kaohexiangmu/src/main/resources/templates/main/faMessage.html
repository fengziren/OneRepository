<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head th:replace="main/public/public :: head">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.2.1/themes/default/style.min.css" />
</head>
<body>


<!-- Modal -->
<div style=" opacity: 1;" class="modal fade"
     id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">发送消息</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div>
                    <label th:class="text-input-context-menu">标题：
                        <input type="text" th:class="form-search" name="title">
                    </label>
                </div>
                <div id="jsTree">
                    <ul>
                        <li>用户列表
                            <ul>
                                <li data-jstree='{"icon":"glyphicon glyphicon-leaf"}'>Child node 1</li>
                                <li data-jstree='{"icon":"glyphicon glyphicon-leaf"}'>滴滴滴</li>
                            </ul>
                        </li>

                    </ul>
                </div>
                <div id="divCont">

                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div>

<div class="container">

    <div class="row">
        <div th:replace="~{main/public/public::top}"/>

        <div th:replace="~{main/public/public::left}"/>

        <div class="col-6">
            <div>
                <form  th:class="form-horizontal" th:action="@{/main/famsg}">
                    <label th:class="text-input-context-menu">标题：
                        <input type="text" th:class="form-search" name="title">
                    </label>
                    <label th:class="text-input-context-menu">阅读状态
                        <select name="status">
                            <option th:value="3">全部</option>
                            <option th:value="2">部分已读</option>
                            <option th:value="1">已读</option>
                            <option th:value="0">未读</option>
                        </select>
                    </label>
                    <label th:class="text-input-context-menu">通知时间
                        <input type="date" th:class="form-search" name="startTime">
                        <input type="date" th:class="form-search" name="endTime">
                    </label>
                    <button type="submit" th:class="btn-primary" >搜索</button>
                    <button type="reset" th:class="btn-primary" >重置</button>
                </form>
            </div>
            <div>
                <!-- Button trigger modal -->
                <button type="button" class="btn btn-secondary" data-toggle="modal" data-target="#exampleModal">
                    发送消息
                </button>
            </div>
            <div>

                <table th:class="table">
                    <thead>
                    <tr>
                        <th scope="col">
                            <input type="checkbox">
                        </th>
                        <th scope="col">标题</th>
                        <th scope="col">内容</th>
                        <th scope="col">发件用户</th>
                        <th scope="col">阅读状态</th>
                        <th scope="col">通知时间</th>
                        <th scope="col">操作</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="message , messageStat:${pageInfo.getList()}">
                        <th><input type="checkbox"></th>
                        <th th:text="${message.title}"></th>
                        <td th:text="${#strings.abbreviate(message.content,10)}"></td>
                        <td th:text="${message.fName}"></td>
                        <td th:text="${message.status}"></td>
                        <td th:text="${#dates.format(message.mTime,'yyyy-MM-dd HH:mm')}"></td>
                        <td >
                            <button type="button" class="btn btn-primary">查看</button>
                            <button type="button" class="btn btn-danger">删除</button>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <nav aria-label="Page navigation example">
                <ul class="pagination">
                    <li class="page-item">
                        <a class="page-link" aria-label="Previous" th:href="@{/main/famsg(pageNum=1,title=${session.arg.title},status=${session.arg.status},startTime=${session.arg.startTime},endTime=${session.arg.endTime})}" >
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                    <li class="page-item" th:each="pageNum:${#numbers.sequence(1,pageInfo.getPages())}">
                        <a class="page-link" th:href="@{/main/famsg(pageNum=${pageNum},title=${session.arg.title},status=${session.arg.status},startTime=${session.arg.startTime},endTime=${session.arg.endTime})}" th:text="${pageNum}"></a>

                    </li>
                    <li class="page-item">
                        <a class="page-link" aria-label="Next" th:href="@{/main/famsg(pageNum=${pageInfo.getPages()},title=${session.arg.title},status=${session.arg.status},startTime=${session.arg.startTime},endTime=${session.arg.endTime})}">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>

</div>

</div>

<!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
<script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>
<!--引入富文本编辑器-->
<script src="https://cdn.jsdelivr.net/npm/wangeditor@latest/dist/wangEditor.min.js"></script>
<!--jsTree-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.2.1/jstree.min.js"></script>

<script>
    const E = window.wangEditor
    const editor = new E('#divCont')
    // 或者 const editor = new E( document.getElementById('div1') )
    editor.config.menus = []
    editor.create()

    $(function () {

        $('#jsTree').jstree(
            {"plugins": ["checkbox"],
            "checkbox": {
                "keep_selected_style": false,//是否默认选中
                "three_state": false,//父子级别级联选择
                "tie_selection": false}

            });
        $('#jsTree').jstree.plugins("checkbox");
        $('#jsTree').on("changed.jstree", function (e, data) {

        });

    });
</script>
</body>
</html>